MACRO ASSEMBLER EINS                                        06/10/18 14:33:02 PAGE     1


WIN32 MACRO ASSEMBLER MA51 V06.04.14OBJECT MODULE PLACED IN D:\CT\MIKROCONTROLLER\KA\KATIMER\CODE\1\CODE\EINS.OBJ
ASSEMBLER INVOKED BY: MA51.EXE D:\CT\MIKROCONTROLLER\KA\KATIMER\CODE\1\CODE\EINS.A51 OJ(D:\CT\MIKROCONTROLLER\KA\KATIMER\CODE\1\CODE\EINS.OBJ) PIN(C:\RIDE\INC;C:\RIDE\INC\51) PIN(C:\RIDE\INC\51\) EP LINES SYNTAX(ASM51) PR(D:\CT\MIKROCONTROLLER\KA\KATIMER\CODE\1\CODE\EINS.LST) XR DB PW(80) RB(0) 

LOC     OBJ           LINE    SOURCE
                         1     ; Autor    : Daniel Vera gilliard
                         2     ; Beschreibung: Ein lauflicht mit einem 30s Timer als Pause
                         3     ;---------------------------------------------------------------
                         4     INCLUDE REG51.INC
                        83     
                        84     ;---------------------------------------------------------------
                        85     ; Programmbeginn
0000    02000C          86             JMP INIT ; Interrupts Überspringen
                        87     
                        88     ; Interruptroutinen
                        89     ;---------------------------------------------------------------
                        90     
                        91     ; Interrrupt 1
  0003                  92     ORG 03H ; ISR für Interrupt0 wird festgelegt
0003    19              93     DEC R1 
                        94     ;clr TR0 ;Timer Stoppen
                        95     ;pruefe:
                        96     ;DJNZ 0x01, weiter ;R1 vermindern. Falss 0(Lauflicht erhöhen) sonst weiter
                        97     ;call lauflicht ;lauflicht eins weiter
                        98     ;weiter:
                        99     ;call timer0_int ;Startwerte neu Setzen
                       100     ;SETB TR0 ;Timer wieder starten 
0004    32             101     RETI
                       102     
                       103     ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                       104     ; Interruptbehandlungsroutine Timer 0
                       105     TIMER0_INT: 
                       106             ;mov TL0,#13Fh ;Startwert festlegen
0005    758AFF         107             MOV TL0,#0XFF ;Startwert festlegen
                       108             ;mov TH0,#0h 
0008    758CF6         109             MOV TH0,#0XF6
000B    22             110             RET
                       111     
                       112     ; Initialisierung
                       113     ;---------------------------------------------------------------
                       114     INIT: 
                       115     
                       116     ;Variablen
000C    791E           117     MOV R1, #30D ;R1 für den timer auf null setzen
000E    7A01           118     MOV R2, #1D ;Lauflicht auf 1 setzen
                       119     ; Timer 0 aktivieren
                       120     ;  Intervall: x.xx ms
                       121             ;mov TL0,#13Fh ;Startwert festlegen
0010    758AFF         122             MOV TL0,#0XFF ;Startwert festlegen
                       123             ;mov TH0,#0h 
0013    758CF6         124             MOV TH0,#0XF6
                       125     
                       126     ; die SFR's initialisieren
0016    758901         127             MOV TMOD,#00000001B ;Timer einschalten
0019    758810         128             MOV TCON,#00010000B ;Timer konfigurieren & starten
                       129     
                       130     ;Interrupts setzen
001C    D2A9           131     SETB ET0
001E    D2AF           132     SETB EA  ; Allgemeine Interrupt freigabe
0020    D28C           133     SETB TR0 ;Timer starten
0022    020025         134     JMP MAIN
                       135     
                       136     ; Hauptprogramm
                       137     ;---------------------------------------------------------------
                       138     MAIN: 
0025    8A80           139     MOV P0, R2 ;Wert von R2 auf das Lauflicht anzeigen
0027    80FC           140     JMP MAIN
                       141     
                       142     ;Programm um Lauflicht zu erhöhen
                       143     LAUFLICHT: 
0029    BA0802         144     CJNE R2, #8D, LICHTINC ;schauen ob Lauflicht durch
002C    7A00           145     MOV R2, #0D ;Lauflicht auf eins setzen
                       146     LICHTINC: 
002E    0A             147     INC R2 ;Lauflicht incrementieren
002F    22             148     RET

*** WARNING #87 IN LINE 70 OF eins.a51 : MISSING 'END' STATEMENT
MACRO ASSEMBLER EINS                                        06/10/18 14:33:02 PAGE     0


SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES             REFERENCES

DPL. . . . . . . .  D ADDR   0082H   A                          19# 
P0 . . . . . . . .  D ADDR   0080H   A                          11# 139 
P1 . . . . . . . .  D ADDR   0090H   A                          12# 
B. . . . . . . . .  D ADDR   00F0H   A                          17# 
P2 . . . . . . . .  D ADDR   00A0H   A                          13# 
PS . . . . . . . .  B ADDR   00B8H.4 A                          60# 
SP . . . . . . . .  D ADDR   0081H   A                          18# 
P3 . . . . . . . .  D ADDR   00B0H   A                          14# 
T0 . . . . . . . .  B ADDR   00B0H.4 A                          69# 
AC . . . . . . . .  B ADDR   00D0H.6 A                          37# 
MAIN . . . . . . .  C ADDR   0025H   A                          134 138# 140 
REN. . . . . . . .  B ADDR   0098H.4 A                          78# 
T1 . . . . . . . .  B ADDR   00B0H.5 A                          68# 
OV . . . . . . . .  B ADDR   00D0H.2 A                          41# 
EA . . . . . . . .  B ADDR   00A8H.7 A                          53# 132 
ACC. . . . . . . .  D ADDR   00E0H   A                          16# 
WR . . . . . . . .  B ADDR   00B0H.6 A                          67# 
ET0. . . . . . . .  B ADDR   00A8H.1 A                          57# 131 
ET1. . . . . . . .  B ADDR   00A8H.3 A                          55# 
TF0. . . . . . . .  B ADDR   0088H.5 A                          46# 
TF1. . . . . . . .  B ADDR   0088H.7 A                          44# 
RB8. . . . . . . .  B ADDR   0098H.2 A                          80# 
TH0. . . . . . . .  D ADDR   008CH   A                          26# 109 124 
EX0. . . . . . . .  B ADDR   00A8H.0 A                          58# 
IT0. . . . . . . .  B ADDR   0088H.0 A                          51# 
TH1. . . . . . . .  D ADDR   008DH   A                          27# 
LICHTINC . . . . .  C ADDR   002EH   A                          144 146# 
TB8. . . . . . . .  B ADDR   0098H.3 A                          79# 
RXD. . . . . . . .  B ADDR   00B0H.0 A                          73# 
EX1. . . . . . . .  B ADDR   00A8H.2 A                          56# 
IT1. . . . . . . .  B ADDR   0088H.2 A                          49# 
IE . . . . . . . .  D ADDR   00A8H   A                          28# 
SM0. . . . . . . .  B ADDR   0098H.7 A                          75# 
TXD. . . . . . . .  B ADDR   00B0H.1 A                          72# 
P. . . . . . . . .  B ADDR   00D0H.0 A                          42# 
SBUF . . . . . . .  D ADDR   0099H   A                          31# 
TL0. . . . . . . .  D ADDR   008AH   A                          24# 107 122 
PCON . . . . . . .  D ADDR   0087H   A                          21# 
SM1. . . . . . . .  B ADDR   0098H.6 A                          76# 
TL1. . . . . . . .  D ADDR   008BH   A                          25# 
SM2. . . . . . . .  B ADDR   0098H.5 A                          77# 
SCON . . . . . . .  D ADDR   0098H   A                          30# 
INIT . . . . . . .  C ADDR   000CH   A                          86 114# 
PT0. . . . . . . .  B ADDR   00B8H.1 A                          63# 
TMOD . . . . . . .  D ADDR   0089H   A                          23# 127 
TCON . . . . . . .  D ADDR   0088H   A                          22# 128 
PT1. . . . . . . .  B ADDR   00B8H.3 A                          61# 
RS0. . . . . . . .  B ADDR   00D0H.3 A                          40# 
RD . . . . . . . .  B ADDR   00B0H.7 A                          66# 
TR0. . . . . . . .  B ADDR   0088H.4 A                          47# 133 
RS1. . . . . . . .  B ADDR   00D0H.4 A                          39# 
F0 . . . . . . . .  B ADDR   00D0H.5 A                          38# 
TR1. . . . . . . .  B ADDR   0088H.6 A                          45# 
PX0. . . . . . . .  B ADDR   00B8H.0 A                          64# 
ES . . . . . . . .  B ADDR   00A8H.4 A                          54# 
PX1. . . . . . . .  B ADDR   00B8H.2 A                          62# 
IP . . . . . . . .  D ADDR   00B8H   A                          29# 
PSW. . . . . . . .  D ADDR   00D0H   A                          15# 
TIMER0_INT . . . .  C ADDR   0005H   A                          105# 
RI . . . . . . . .  B ADDR   0098H.0 A                          82# 
INT0 . . . . . . .  B ADDR   00B0H.2 A                          71# 
LAUFLICHT. . . . .  C ADDR   0029H   A                          143# 
INT1 . . . . . . .  B ADDR   00B0H.3 A                          70# 
CY . . . . . . . .  B ADDR   00D0H.7 A                          36# 
DPH. . . . . . . .  D ADDR   0083H   A                          20# 
TI . . . . . . . .  B ADDR   0098H.1 A                          81# 
IE0. . . . . . . .  B ADDR   0088H.1 A                          50# 
IE1. . . . . . . .  B ADDR   0088H.3 A                          48# 



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     48    ----
   XDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


REGISTER BANK(S) USED : 0 

ASSEMBLY COMPLETE.   1 WARNING(S)   0 ERROR(S)
